"use strict";(()=>{var e={};e.id=272,e.ids=[272],e.modules={10:(e,t,s)=>{s.r(t),s.d(t,{config:()=>c,default:()=>u,routeModule:()=>E});var n={};s.r(n),s.d(n,{default:()=>l});var o=s(3480),r=s(8667),i=s(6435),a=s(5219);async function l(e,t){try{let e=process.env.BREVO_API_KEY,s=process.env.EMAIL_USER;if(console.log("==== BREVO TEST DEBUGGING ===="),console.log("EMAIL_USER exists:",!!s),console.log("EMAIL_USER value:",s||"not set"),console.log("BREVO_API_KEY exists:",!!e),console.log("BREVO_API_KEY first 5 chars:",e?e.substring(0,5)+"...":"not set"),!e)return t.status(500).json({success:!1,message:"BREVO_API_KEY is not set in environment variables",envVars:{EMAIL_USER_EXISTS:!!s,BREVO_API_KEY_EXISTS:!!e}});if(!s)return t.status(500).json({success:!1,message:"EMAIL_USER is not set in environment variables",envVars:{EMAIL_USER_EXISTS:!!s,BREVO_API_KEY_EXISTS:!!e}});console.log("Configuring Brevo API..."),a.ApiClient.instance.authentications["api-key"].apiKey=e;let n=new a.TransactionalEmailsApi;console.log("Creating test email...");let o=new a.SendSmtpEmail;o.subject="Brevo API Test - Tonle Mekong Restaurant",o.htmlContent=`
      <html>
        <body>
          <h1 style="color: #e67e22;">Test Email</h1>
          <p>This is a test email from the Tonle Mekong Restaurant reservation system using Brevo API.</p>
          <p>If you're seeing this, your email configuration is working correctly!</p>
          <p>Timestamp: ${new Date().toISOString()}</p>
          <p>Environment: production</p>
        </body>
      </html>
    `,o.sender={name:"Tonle Mekong Restaurant",email:s},o.to=[{email:s,name:"Test Recipient"}],console.log("Sending test email...");let r=await n.sendTransacEmail(o);return console.log("Email sent successfully:",r),t.status(200).json({success:!0,message:"Email sent successfully via Brevo API!",messageId:r.messageId,timestamp:new Date().toISOString(),sentTo:s})}catch(e){return console.error("Error sending test email:",e),t.status(500).json({success:!1,message:"Failed to send test email",error:e.message,details:e.response?.body||null})}}let u=(0,i.M)(n,"default"),c=(0,i.M)(n,"config"),E=new o.PagesAPIRouteModule({definition:{kind:r.A.PAGES_API,page:"/api/test-brevo",pathname:"/api/test-brevo",bundlePath:"",filename:""},userland:n})},3480:(e,t,s)=>{e.exports=s(5600)},5219:e=>{e.exports=require("@getbrevo/brevo")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return s}});var s=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var t=require("../../webpack-api-runtime.js");t.C(e);var s=t(t.s=10);module.exports=s})();